create table workshop_types (
    name text not null unique,
    id serial primary key
);

insert into workshop_types values
    ('Обработка' , 1),
    ('Проектирование' , 2),
    ('Сборка' , 3),
    ('Сушка' , 4);

create table workshops (
    id serial primary key,
    workshop_types_id integer not null references workshop_types(id),
    name text not null unique,
    people integer
);

insert into workshops values
    (1, 1, ' Изготовления изделий из искусственного камня и композитных материалов' , 3),
    (2, 1, ' Изготовления мягкой мебели' , 5),
    (3, 3, ' Монтажа стеклянных, зеркальных вставок и других изделий' , 2),
    (4, 1, ' Обработки' , 6),
    (5, 1, ' Покраски' , 5),
    (6, 2, ' Проектный' , 4),
    (7, 1, ' Раскроя' , 5),
    (8, 2, ' Расчетный' , 5),
    (9, 3, ' Сборки' , 6),
    (10, 1, ' Столярный' , 7),
    (11, 4, ' Сушильный' , 3),
    (12, 3, ' Упаковки' , 4);

select (setval('workshops_id_seq', (select max(id) from workshops)));

create table product_types (
    name text not null unique,
    id serial primary key,
    k numeric(2,1) not null
);
insert into product_types values
    ('Гостиные', 1 , 3.5),
    ('Комоды', 2 , 2.3),
    ('Кровати', 3 , 4.7),
    ('Мягкая мебель' ,4 , 3.0),
    ('Прихожие' , 5 , 5.6),
    ('Шкафы' , 6 , 1.5);

create table material_types (
    name text not null unique,
    id serial primary key,
    bad_percent numeric(3,2)
);

insert into material_types values
('Ламинированное ДСП' , 1 , 0.70),
('МДФ' , 2 , 0.30),
('Мебельный щит из массива дерева' , 3 , 0.80),
('Фанера' , 4 , 0.55);

create table products (
    product_types_id integer not null references product_types(id),
    name text not null unique,
    articul text not null unique,
    min_price numeric(10,2) not null,
    material_types_id integer not null references material_types(id),
    id serial primary key
);

insert into products values
(3, 'Кровать с матрасом 90х2000 Венге' , '6159043', 55600.00 , 1 , 8),
(3, 'Кровать универсальная Дуб натуральный' , '6588376', 37900.00 , 1 , 11),
(5, 'Прихожая Венге Винтаж' , '3028272', 24970.00 , 1 , 12),
(5, 'Тумба с вешалкой Дуб натуральный' , '3029272', 18206.00 , 1 , 17),
(6, 'Шкаф-купе 3-х дверный Сосна белая' , '2759324', 131560.00 , 1 , 19),
(2, 'Тумба под ТВ ' , '4028048', 12350.00 , 2 , 16),
(4, 'Диван модульный Телескоп' , '7137981', 75900.00 , 3 , 2),
(4, 'Диван-кровать Соло' , '7029787', 120345.00 , 3 , 3),
(4, 'Диван-кровать угловой Книжка' , '7118827', 85900.00 , 3 , 4),
(2, 'Комод 4 ящика Вишня светлая' , '4033136', 41200.00 , 3 , 5),
(2, 'Комод 6 ящиков Вишня светлая' , '4115947', 61235.00 , 3 , 6),
(1, 'Комплект мебели для гостиной Ольха горная' , '1549922', 160507.00 , 3 , 7),
(3, 'Кровать с подъемным механизмом с матрасом 1600х2000 Венге' , '6026662', 69500.00 , 3 , 9),
(5, 'Прихожая-комплект Дуб темный' , '3028248', 177509.00 , 3 , 13),
(6, 'Стеллаж Бук натуральный' , '2118827', 38700.00 , 3 , 14),
(1, 'Стенка для гостиной Вишня темная' , '1018556', 216907.00 , 3 , 15),
(4, 'Детский диван Выкатной' , '7758953', 25990.00 , 4 , 1),
(3, 'Кровать с ящиками Ясень белый' , '6758375', 46750.00 , 4 , 10),
(6, 'Шкаф 4 дверный с ящиками Ясень серый' , '2559898', 160151.00 , 4 , 18),
(6, 'Шкаф-пенал Береза белый' , '2259474', 40500.00 , 4 , 20);

-- drop table workshop_products;
create table workshop_products (
    id serial primary key,
    products_id integer not null references products(id),
    workshops_id integer not null references workshops(id),
    prod_time numeric(2,1) not null
);
insert into workshop_products values
(1, 1, 2, 4.0),
(2, 1, 4, 0.3),
(3, 1, 5, 0.5),
(4, 1, 7, 0.7),
(5, 1, 10, 1.0),
(6, 1, 12, 0.5),
(7, 2, 2, 4.5),
(8, 2, 4, 0.5),
(9, 2, 5, 1.0),
(10, 2, 7, 1.0),
(11, 2, 9, 0.3),
(12, 2, 10, 0.5),
(13, 2, 11, 2.0),
(14, 2, 12, 0.2),
(15, 3, 2, 4.7),
(16, 3, 4, 0.5),
(17, 3, 5, 0.5),
(18, 3, 6, 0.5),
(19, 3, 7, 0.5),
(20, 3, 8, 0.5),
(21, 3, 10, 0.5),
(22, 3, 12, 0.3),
(23, 4, 2, 4.2),
(24, 4, 4, 0.5),
(25, 4, 5, 0.5),
(26, 4, 7, 1.0),
(27, 4, 9, 0.5),
(28, 4, 11, 2.0),
(29, 4, 12, 0.3),
(30, 5, 4, 0.4),
(31, 5, 5, 0.4),
(32, 5, 7, 1.0),
(33, 5, 10, 2.0),
(34, 5, 11, 2.0),
(35, 5, 12, 0.2),
(36, 6, 4, 0.5),
(37, 6, 5, 1.0),
(38, 6, 7, 1.0),
(39, 6, 9, 0.3),
(40, 6, 10, 2.0),
(41, 6, 11, 2.0),
(42, 6, 12, 0.2),
(43, 7, 4, 0.5),
(44, 7, 5, 0.3),
(45, 7, 6, 1.0),
(46, 7, 7, 1.0),
(47, 7, 8, 0.4),
(48, 7, 10, 1.5),
(49, 7, 11, 2.0),
(50, 7, 12, 0.3),
(51, 8, 2, 5.5),
(52, 8, 4, 1.0),
(53, 8, 7, 1.0),
(54, 8, 12, 0.5),
(55, 9, 1, 2.0),
(56, 9, 3, 0.5),
(57, 9, 4, 0.6),
(58, 9, 5, 0.4),
(59, 9, 7, 1.0),
(60, 9, 12, 0.5),
(61, 10, 4, 2.0),
(62, 10, 5, 1.5),
(63, 10, 7, 2.0),
(64, 10, 9, 0.3),
(65, 10, 12, 0.2),
(66, 11, 4, 0.8),
(67, 11, 7, 1.1),
(68, 11, 9, 0.8),
(69, 11, 12, 0.3),
(70, 12, 3, 0.5),
(71, 12, 4, 0.5),
(72, 12, 7, 1.0),
(73, 12, 9, 1.0),
(74, 13, 3, 0.3),
(75, 13, 4, 0.5),
(76, 13, 5, 0.5),
(77, 13, 6, 1.5),
(78, 13, 7, 1.0),
(79, 13, 8, 0.5),
(80, 13, 9, 0.5),
(81, 13, 10, 1.0),
(82, 13, 11, 2.0),
(83, 13, 12, 0.2),
(84, 14, 4, 0.3),
(85, 14, 5, 1.0),
(86, 14, 6, 1.0),
(87, 14, 7, 1.0),
(88, 14, 8, 0.7),
(89, 14, 9, 0.3),
(90, 14, 10, 0.5),
(91, 14, 11, 2.0),
(92, 14, 12, 0.2),
(93, 15, 3, 0.3),
(94, 15, 4, 0.3),
(95, 15, 5, 0.4),
(96, 15, 6, 1.0),
(97, 15, 7, 1.0),
(98, 15, 8, 1.0),
(99, 15, 9, 1.0),
(100, 15, 10, 1.0),
(101, 15, 11, 2.0),
(102, 16, 1, 2.7),
(103, 16, 3, 1.0),
(104, 16, 4, 0.5),
(105, 16, 5, 0.5),
(106, 16, 6, 1.0),
(107, 16, 7, 0.6),
(108, 16, 8, 0.4),
(109, 16, 9, 1.0),
(110, 16, 12, 0.3),
(111, 17, 4, 0.5),
(112, 17, 7, 1.0),
(113, 17, 12, 0.5),
(114, 18, 4, 1.5),
(115, 18, 7, 1.0),
(116, 18, 9, 2.0),
(117, 18, 10, 1.0),
(118, 18, 12, 0.5),
(119, 19, 3, 0.5),
(120, 19, 4, 0.5),
(121, 19, 6, 2.0),
(122, 19, 7, 1.0),
(123, 19, 8, 1.0),
(124, 19, 9, 1.5),
(125, 19, 12, 0.5),
(126, 20, 4, 1.0),
(127, 20, 5, 2.5),
(128, 20, 7, 1.0),
(129, 20, 10, 3.0),
(130, 20, 12, 0.5);




